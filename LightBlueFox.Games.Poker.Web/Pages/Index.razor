@page "/{errorMsg?}"
@using LightBlueFox.Games.Poker;
@using LightBlueFox.Games.Poker.Utils;
@inject NavigationManager NM;

@code{
	string name;

	[Parameter]
	public string? errorMsg { get; set; }

	public string? id { get; set; } = "asd1";
	public string isErrorVisible {
		get
		{
			return string.IsNullOrEmpty(errorMsg?.Trim()) ? "hidden" : "visible";
		}
	}


	void joinGame()
	{
		Console.WriteLine("joinGame ({0})", name);
		NM.NavigateTo("/game/" + id + "/" + name);
	}


	public Index()
	{
		DeckGenerator dg = new();
		hand = dg.PopRandom(2);
		table = dg.PopRandom(5);
	}

	private LightBlueFox.Games.Poker.Card[] hand;
	private LightBlueFox.Games.Poker.Card[] table;
}


<style>


	body{
		background-color: darkgreen;
		
	}

	.menu {
		background-color: white;
		border: 3px solid black;
		display: inline-block;
		border-radius: 5px;
		padding: 15px 50px;
		width: 80vw;
		height: 60vh;
		position: absolute;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		align-content: center;
		max-width: 60vh;
	}

	.menu * {
		width: 100%;
		text-align: center;
		font-size: 2vw;
		margin-top: 15px;
		margin-bottom: 15px;
	}

	.menu input {
		margin-left: 10%;
		width: 80%;
		text-align: left;
		padding: 10px;
		border: 0px solid black;
		border-radius: 5px;
		background: #dedede
	}

	.menu input:hover {
		background-color: #cecece;
	}

	.menu button {
		width: 40%;
		margin-left: 30%;
		background-color: green;
		border: 0px solid black;
		color: white;
		padding: 30px 10px;
		border-radius: 5px;
		transition: ease-out background 0.2s;
	}

	.menu button:enabled:hover{
		background-color: darkgreen;
	}	
	
	.menu button:disabled {
		background-color: grey;
		color: lightgrey;
	}

	.error {
		display: inline-block;
		background-color: #f54242;
		min-width: 25vw;
		color: white;
		font-weight: bold;
		font-size: 20px;
		padding: 15px;
		border-radius: 15px;
	}

	.card{
		width: 230px;
		position: absolute;
		top: 50%;
		left: 50%;
		z-index: -1;
		transition: width 0.5s;
	}

	.card:hover {
		width: 250px;
	}

	.h0{
		transform: translate(-180%, -50%) rotate(-30deg) !important;
	}

	.h1 {
		transform: translate(-160%, -50%) rotate(-15deg) !important;
	}

	.b1 {
		transform: translate(50%, 10%) rotate(25deg) !important;
	}

	.b2 {
		transform: translate(50%, 10%) rotate(15deg) !important;
	}

	.table{
		transition: width 0.5s;
		position: absolute;
		width: 130px;
		left: 50%;
		top: 11%;
		z-index: -1;
	}
	.table:hover{
		width: 160px;
	}

	.t0{
		transform: translate(-20%,10%) rotate(-20deg) !important;	
	}

	.t1 {
		transform: translate(-10%,5%) rotate(-10deg) !important;
	}

	.t2 {
		transform: translate(0%,0%) rotate(0deg) !important;
	}

	.t3 {
		transform: translate(10%,-5%) rotate(10deg) !important;
	}

	.t4 {
		transform: translate(20%,-10%) rotate(20deg) !important;
	}

	#footer{
		background: black;
		color: white;
		font-size: 11px;
		position: absolute;
		bottom: 0%;
		left: 0%;
		width: calc(100vw - 30px);
		padding-right: 30px;
		text-align: right;
	}

	#footer a{
		color: orange;
	}

</style>



<div class="menu">
	<div class="error" style="visibility: @isErrorVisible">
		Error: @errorMsg
	</div>
	<h1 style="font-size: 3vw">Online Poker Game</h1>
	<p>Your Name: </p>
	<Microsoft.AspNetCore.Components.Forms.InputText @bind-Value="name" @oninput="((e) => name = e.Value?.ToString() ?? string.Empty)" type="text" name="name"/>
	<button disabled="@(string.IsNullOrEmpty(name))" @onclick="joinGame">Join Game</button>
</div>


<Card Class="card b1"></Card>
<Card Class="card b2"></Card>

@for(int i = 0; i < 2; i++)
{
	<Card Class="@("card h"+i)" Suit="hand[i].Suit" Value="hand[i].Value"></Card>
}

@for(int i = 0; i < 5; i++)
{
	<Card Class="@("table t"+i)" Suit="table[i].Suit" Value="table[i].Value"></Card>
} 


<div id="footer">
	<p>Developed by Jakob Tinhofer. Check out this project <a href="https://github.com/LightBlueFox-Labs/LightBlueFox.Games.Poker">on Github.</a> This website does not use any cookies or store any personal data.</p>
</div>